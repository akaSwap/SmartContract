{
    storage
        (pair
            (pair
                (pair
                    (pair
                        (address %akaDAOAdmin)
                        (address %akaMinter))
                    (pair
                        (address %akaNFTContract)
                        (nat %cost_akaDAO_per_akaOBJ)))
                (pair
                    (pair
                        (nat %gacha_id)
                        (nat %gacha_limit))
                    (pair
                        (big_map %gacha_plays
                            nat
                            (pair
                                (nat %gacha_amount)
                                (pair
                                    (nat %gacha_id)
                                    (address %sender))))
                        (pair
                            (int %gacha_stage)
                            (big_map %gacha_whitelist address unit)))))
            (pair
                (pair
                    (pair
                        (big_map %gachas
                            nat
                            (pair
                                (pair
                                    (pair
                                        (timestamp %cancel_time)
                                        (nat %gacha_amount))
                                    (pair
                                        (map %gacha_items
                                            nat
                                            (pair
                                                (nat %remains)
                                                (nat %total)))
                                        (nat %gacha_play_remains)))
                                (pair
                                    (pair
                                        (timestamp %issue_time)
                                        (address %issuer))
                                    (pair
                                        (nat %lastprize_akaOBJ_id)
                                        (pair
                                            (string %metadata)
                                            (mutez %xtz_per_gacha))))))
                        (mutez %lowest_price))
                    (pair
                        (nat %management_fee)
                        (address %manager)))
                (pair
                    (pair
                        (big_map %metadata string bytes)
                        (address %oracle))
                    (pair
                        (nat %oracle_play_id)
                        (pair
                            (bool %paused)
                            (nat %player_play_id))))));
    parameter
        (or
            (or
                (or
                    (or
                        (nat %cancel_gacha)
                        (pair %make_gacha
                            (pair
                                (int %gacha_duration)
                                (pair
                                    (map %gacha_items
                                        nat
                                        (pair
                                            (nat %remains)
                                            (nat %total)))
                                    (timestamp %issue_time)))
                            (pair
                                (nat %lastprize_akaOBJ_id)
                                (pair
                                    (string %metadata)
                                    (mutez %xtz_per_gacha)))))
                    (or
                        (map %oracle_gacha nat nat)
                        (pair %play_gacha
                            (nat %gacha_amount)
                            (nat %gacha_id))))
                (or
                    (or
                        (unit %refund_gacha)
                        (nat %set_gacha_limit))
                    (or
                        (bool %set_gacha_pause)
                        (int %set_gacha_stage))))
            (or
                (or
                    (or
                        (mutez %set_lowest_price)
                        (pair %set_metadata
                            (string %k)
                            (bytes %v)))
                    (or
                        (nat %update_cost_akaDAO_per_akaOBJ)
                        (nat %update_management_fee)))
                (or
                    (or
                        (address %update_manager)
                        (address %update_oracle))
                    (or
                        (list %update_whitelist
                            (or
                                (address %add_member)
                                (address %remove_member)))
                        (mutez %withdraw)))));
    code
        {
            UNPAIR;
            IF_LEFT
                {
                    IF_LEFT
                        {
                            IF_LEFT
                                {
                                    IF_LEFT
                                        {
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET 3;
                                            CAR;
                                            CAR;
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET;
                                            IF_NONE
                                                {
                                                    PUSH int 215;
                                                    FAILWITH
                                                }
                                                {
                                                };
                                            GET 3;
                                            CDR;
                                            SENDER;
                                            COMPARE;
                                            EQ;
                                            IF
                                                {
                                                    PUSH bool True
                                                }
                                                {
                                                    SWAP;
                                                    DUP;
                                                    DUG 2;
                                                    GET 5;
                                                    CDR;
                                                    SENDER;
                                                    COMPARE;
                                                    EQ
                                                };
                                            IF
                                                {
                                                    PUSH bool True
                                                }
                                                {
                                                    SWAP;
                                                    DUP;
                                                    DUG 2;
                                                    GET 3;
                                                    GET 4;
                                                    SENDER;
                                                    COMPARE;
                                                    EQ
                                                };
                                            IF
                                                {
                                                }
                                                {
                                                    PUSH string "Only oracle, manager or issuer can cancel gacha";
                                                    FAILWITH
                                                };
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET 3;
                                            CAR;
                                            CAR;
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET;
                                            IF_NONE
                                                {
                                                    PUSH int 219;
                                                    FAILWITH
                                                }
                                                {
                                                };
                                            GET 3;
                                            CDR;
                                            SENDER;
                                            COMPARE;
                                            EQ;
                                            IF
                                                {
                                                    SWAP;
                                                    DUP;
                                                    DUG 2;
                                                    GET 3;
                                                    CAR;
                                                    CAR;
                                                    SWAP;
                                                    DUP;
                                                    DUG 2;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 221;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    GET 3;
                                                    CAR;
                                                    PUSH int 1200;
                                                    ADD;
                                                    NOW;
                                                    COMPARE;
                                                    LT;
                                                    IF
                                                        {
                                                            PUSH bool True
                                                        }
                                                        {
                                                            SWAP;
                                                            DUP;
                                                            DUG 2;
                                                            GET 3;
                                                            CAR;
                                                            CAR;
                                                            SWAP;
                                                            DUP;
                                                            DUG 2;
                                                            GET;
                                                            IF_NONE
                                                                {
                                                                    PUSH int 221;
                                                                    FAILWITH
                                                                }
                                                                {
                                                                };
                                                            CAR;
                                                            CAR;
                                                            CAR;
                                                            NOW;
                                                            COMPARE;
                                                            GT
                                                        };
                                                    IF
                                                        {
                                                        }
                                                        {
                                                            PUSH string "WrongCondition: (sp.now < sp.add_seconds(self.data.gachas[params.cancel_gacha_id].issue_time, 1200)) | (sp.now > self.data.gachas[params.cancel_gacha_id].cancel_time)";
                                                            FAILWITH
                                                        };
                                                    PUSH nat 0;
                                                    DUP 3;
                                                    GET 3;
                                                    CAR;
                                                    CAR;
                                                    DUP 3;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 224;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    CAR;
                                                    GET 3;
                                                    ITER
                                                        {
                                                            GET 3;
                                                            ADD
                                                        };
                                                    DUP 3;
                                                    GET 3;
                                                    CAR;
                                                    CAR;
                                                    DUP 3;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 226;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    CAR;
                                                    CAR;
                                                    CDR;
                                                    COMPARE;
                                                    EQ;
                                                    IF
                                                        {
                                                        }
                                                        {
                                                            PUSH string "WrongCondition: self.data.gachas[params.cancel_gacha_id].gacha_amount == leftDraw.value";
                                                            FAILWITH
                                                        }
                                                }
                                                {
                                                };
                                            NIL
                                                (pair
                                                    address
                                                    (pair nat nat));
                                            DUP 3;
                                            GET 3;
                                            CAR;
                                            CAR;
                                            DUP 3;
                                            GET;
                                            IF_NONE
                                                {
                                                    PUSH int 229;
                                                    FAILWITH
                                                }
                                                {
                                                };
                                            CAR;
                                            GET 3;
                                            ITER
                                                {
                                                    DUP;
                                                    GET 3;
                                                    PUSH nat 0;
                                                    COMPARE;
                                                    LT;
                                                    IF
                                                        {
                                                            DUP;
                                                            GET 3;
                                                            SWAP;
                                                            CAR;
                                                            DUP 5;
                                                            GET 3;
                                                            CAR;
                                                            CAR;
                                                            DUP 5;
                                                            GET;
                                                            IF_NONE
                                                                {
                                                                    PUSH int 229;
                                                                    FAILWITH
                                                                }
                                                                {
                                                                };
                                                            GET 3;
                                                            CDR;
                                                            PAIR 3;
                                                            CONS
                                                        }
                                                        {
                                                            DROP
                                                        }
                                                };
                                            NIL operation;
                                            DUP 4;
                                            CAR;
                                            CAR;
                                            GET 3;
                                            CONTRACT %transfer
                                                (list
                                                    (pair
                                                        address
                                                        (list
                                                            (pair
                                                                address
                                                                (pair nat nat)))));
                                            IF_NONE
                                                {
                                                    PUSH int 292;
                                                    FAILWITH
                                                }
                                                {
                                                };
                                            PUSH mutez 0;
                                            NIL
                                                (pair
                                                    address
                                                    (list
                                                        (pair
                                                            address
                                                            (pair nat nat))));
                                            DIG 4;
                                            SELF_ADDRESS;
                                            PAIR;
                                            CONS;
                                            TRANSFER_TOKENS;
                                            CONS;
                                            PUSH nat 0;
                                            DUP 4;
                                            GET 3;
                                            CAR;
                                            CAR;
                                            DUP 4;
                                            GET;
                                            IF_NONE
                                                {
                                                    PUSH int 232;
                                                    FAILWITH
                                                }
                                                {
                                                };
                                            CAR;
                                            CAR;
                                            CDR;
                                            COMPARE;
                                            GT;
                                            IF
                                                {
                                                    DUP 3;
                                                    CAR;
                                                    CAR;
                                                    GET 3;
                                                    CONTRACT %transfer
                                                        (list
                                                            (pair
                                                                address
                                                                (list
                                                                    (pair
                                                                        address
                                                                        (pair nat nat)))));
                                                    IF_NONE
                                                        {
                                                            PUSH int 300;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    PUSH mutez 0;
                                                    NIL
                                                        (pair
                                                            address
                                                            (list
                                                                (pair
                                                                    address
                                                                    (pair nat nat))));
                                                    NIL
                                                        (pair
                                                            address
                                                            (pair nat nat));
                                                    PUSH nat 1;
                                                    DUP 8;
                                                    GET 3;
                                                    CAR;
                                                    CAR;
                                                    DUP 8;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 233;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    GET 5;
                                                    DUP 9;
                                                    GET 3;
                                                    CAR;
                                                    CAR;
                                                    DUP 9;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 233;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    GET 3;
                                                    CDR;
                                                    PAIR 3;
                                                    CONS;
                                                    SELF_ADDRESS;
                                                    PAIR;
                                                    CONS;
                                                    TRANSFER_TOKENS;
                                                    CONS
                                                }
                                                {
                                                };
                                            DIG 2;
                                            UNPAIR;
                                            SWAP;
                                            UNPAIR;
                                            UNPAIR;
                                            UNPAIR;
                                            NONE
                                                (pair
                                                    (pair
                                                        (pair timestamp nat)
                                                        (pair
                                                            (map
                                                                nat
                                                                (pair nat nat))
                                                            nat))
                                                    (pair
                                                        (pair timestamp address)
                                                        (pair
                                                            nat
                                                            (pair string mutez))));
                                            DIG 7;
                                            UPDATE;
                                            PAIR;
                                            PAIR;
                                            PAIR;
                                            SWAP;
                                            PAIR;
                                            SWAP
                                        }
                                        {
                                            PUSH int 1;
                                            DUP 3;
                                            CAR;
                                            GET 7;
                                            COMPARE;
                                            EQ;
                                            IF
                                                {
                                                    SWAP;
                                                    DUP;
                                                    DUG 2;
                                                    CAR;
                                                    GET 8;
                                                    SENDER;
                                                    MEM;
                                                    IF
                                                        {
                                                        }
                                                        {
                                                            PUSH string "WrongCondition: self.data.gacha_whitelist.contains(sp.sender)";
                                                            FAILWITH
                                                        }
                                                }
                                                {
                                                };
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET 3;
                                            CAR;
                                            CDR;
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET 6;
                                            COMPARE;
                                            GE;
                                            IF
                                                {
                                                }
                                                {
                                                    PUSH string "WrongCondition: params.xtz_per_gacha >= self.data.lowest_price";
                                                    FAILWITH
                                                };
                                            DUP;
                                            CAR;
                                            CAR;
                                            PUSH int 1;
                                            SWAP;
                                            COMPARE;
                                            GE;
                                            IF
                                                {
                                                    DUP;
                                                    CAR;
                                                    CAR;
                                                    PUSH int 30;
                                                    SWAP;
                                                    COMPARE;
                                                    LE
                                                }
                                                {
                                                    PUSH bool False
                                                };
                                            IF
                                                {
                                                }
                                                {
                                                    PUSH string "WrongCondition: (params.gacha_duration >= 1) & (params.gacha_duration <= 30)";
                                                    FAILWITH
                                                };
                                            DUP;
                                            CAR;
                                            GET 3;
                                            SIZE;
                                            PUSH nat 0;
                                            COMPARE;
                                            LT;
                                            IF
                                                {
                                                }
                                                {
                                                    PUSH string "WrongCondition: sp.len(params.gacha_items) > 0";
                                                    FAILWITH
                                                };
                                            PUSH nat 0;
                                            NIL operation;
                                            DUP 3;
                                            CAR;
                                            GET 3;
                                            ITER
                                                {
                                                    PUSH int 3;
                                                    DUP 6;
                                                    CAR;
                                                    GET 7;
                                                    COMPARE;
                                                    LT;
                                                    IF
                                                        {
                                                            SWAP;
                                                            DUP 5;
                                                            CAR;
                                                            CAR;
                                                            CAR;
                                                            CDR;
                                                            CONTRACT %verify_sender
                                                                (pair nat address);
                                                            IF_NONE
                                                                {
                                                                    PUSH int 73;
                                                                    FAILWITH
                                                                }
                                                                {
                                                                };
                                                            PUSH mutez 0;
                                                            SENDER;
                                                            DUP 5;
                                                            CAR;
                                                            PAIR;
                                                            TRANSFER_TOKENS;
                                                            CONS;
                                                            SWAP
                                                        }
                                                        {
                                                        };
                                                    DUP;
                                                    GET 4;
                                                    SWAP;
                                                    DUP;
                                                    DUG 2;
                                                    GET 3;
                                                    COMPARE;
                                                    EQ;
                                                    IF
                                                        {
                                                            DUP;
                                                            GET 3;
                                                            PUSH nat 0;
                                                            COMPARE;
                                                            LT
                                                        }
                                                        {
                                                            PUSH bool False
                                                        };
                                                    IF
                                                        {
                                                        }
                                                        {
                                                            PUSH string "WrongCondition: (item.value.remains == item.value.total) & (item.value.remains > 0)";
                                                            FAILWITH
                                                        };
                                                    DIG 2;
                                                    SWAP;
                                                    GET 3;
                                                    ADD;
                                                    SWAP
                                                };
                                            PUSH int 3;
                                            DUP 5;
                                            CAR;
                                            GET 7;
                                            COMPARE;
                                            LT;
                                            IF
                                                {
                                                    DUP 4;
                                                    CAR;
                                                    CAR;
                                                    CAR;
                                                    CDR;
                                                    CONTRACT %verify_sender
                                                        (pair nat address);
                                                    IF_NONE
                                                        {
                                                            PUSH int 80;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    PUSH mutez 0;
                                                    SENDER;
                                                    DUP 6;
                                                    GET 3;
                                                    PAIR;
                                                    TRANSFER_TOKENS;
                                                    CONS
                                                }
                                                {
                                                };
                                            PUSH nat 0;
                                            DUP 3;
                                            COMPARE;
                                            GT;
                                            IF
                                                {
                                                }
                                                {
                                                    PUSH string "WrongCondition: totalAmount.value > 0";
                                                    FAILWITH
                                                };
                                            PUSH int 1;
                                            DUP 5;
                                            CAR;
                                            GET 7;
                                            COMPARE;
                                            GT;
                                            IF
                                                {
                                                    DUP 4;
                                                    CAR;
                                                    CAR;
                                                    CAR;
                                                    CAR;
                                                    CONTRACT %akaDAO_admin_transfer
                                                        (pair
                                                            nat
                                                            (pair address address));
                                                    IF_NONE
                                                        {
                                                            PUSH int 87;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    PUSH mutez 0;
                                                    DUP 6;
                                                    GET 3;
                                                    GET 4;
                                                    SENDER;
                                                    DUP 8;
                                                    CAR;
                                                    CAR;
                                                    GET 4;
                                                    DUP 7;
                                                    MUL;
                                                    PAIR 3;
                                                    TRANSFER_TOKENS;
                                                    CONS
                                                }
                                                {
                                                };
                                            NIL
                                                (pair
                                                    address
                                                    (pair nat nat));
                                            DUP 4;
                                            CAR;
                                            GET 3;
                                            ITER
                                                {
                                                    DUP;
                                                    GET 3;
                                                    SWAP;
                                                    CAR;
                                                    SELF_ADDRESS;
                                                    PAIR 3;
                                                    CONS
                                                };
                                            PUSH nat 1;
                                            DUP 5;
                                            GET 3;
                                            SELF_ADDRESS;
                                            PAIR 3;
                                            CONS;
                                            SWAP;
                                            DUP 5;
                                            CAR;
                                            CAR;
                                            CAR;
                                            CDR;
                                            CONTRACT %fa2_admin_transfer
                                                (pair
                                                    address
                                                    (list
                                                        (pair
                                                            address
                                                            (pair nat nat))));
                                            IF_NONE
                                                {
                                                    PUSH int 94;
                                                    FAILWITH
                                                }
                                                {
                                                };
                                            PUSH mutez 0;
                                            DIG 3;
                                            SENDER;
                                            PAIR;
                                            TRANSFER_TOKENS;
                                            CONS;
                                            DUP 3;
                                            CAR;
                                            GET 4;
                                            NOW;
                                            DUP 5;
                                            CAR;
                                            GET 4;
                                            COMPARE;
                                            LT;
                                            IF
                                                {
                                                    DROP;
                                                    NOW
                                                }
                                                {
                                                };
                                            DUP 5;
                                            UNPAIR;
                                            SWAP;
                                            UNPAIR;
                                            UNPAIR;
                                            UNPAIR;
                                            DIG 8;
                                            DUP;
                                            GET 6;
                                            SWAP;
                                            DUP;
                                            DUG 10;
                                            GET 5;
                                            PAIR;
                                            DUP 10;
                                            GET 3;
                                            PAIR;
                                            SENDER;
                                            DUP 8;
                                            PAIR;
                                            PAIR;
                                            DUP 9;
                                            DUP 11;
                                            CAR;
                                            GET 3;
                                            PAIR;
                                            DIG 9;
                                            DIG 8;
                                            PUSH int 60;
                                            DUP;
                                            PUSH int 24;
                                            DIG 13;
                                            CAR;
                                            CAR;
                                            MUL;
                                            MUL;
                                            MUL;
                                            ADD;
                                            PAIR;
                                            PAIR;
                                            PAIR;
                                            SOME;
                                            DIG 7;
                                            CAR;
                                            GET 3;
                                            CAR;
                                            UPDATE;
                                            PAIR;
                                            PAIR;
                                            PAIR;
                                            SWAP;
                                            UNPAIR;
                                            SWAP;
                                            UNPAIR;
                                            UNPAIR;
                                            PUSH nat 1;
                                            ADD;
                                            PAIR;
                                            PAIR;
                                            SWAP;
                                            PAIR;
                                            PAIR;
                                            SWAP
                                        }
                                }
                                {
                                    IF_LEFT
                                        {
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET 5;
                                            CDR;
                                            SENDER;
                                            COMPARE;
                                            EQ;
                                            IF
                                                {
                                                    SWAP;
                                                    DUP;
                                                    GET 10;
                                                    SWAP;
                                                    DUP;
                                                    DUG 3;
                                                    GET 7;
                                                    COMPARE;
                                                    LT
                                                }
                                                {
                                                    PUSH bool False
                                                };
                                            IF
                                                {
                                                }
                                                {
                                                    PUSH string "WrongCondition: (sp.sender == self.data.oracle) & (self.data.oracle_play_id < self.data.player_play_id)";
                                                    FAILWITH
                                                };
                                            PUSH nat 0;
                                            DIG 2;
                                            DUP;
                                            CAR;
                                            GET 5;
                                            SWAP;
                                            DUP;
                                            DUG 4;
                                            GET 7;
                                            GET;
                                            IF_NONE
                                                {
                                                    PUSH int 144;
                                                    FAILWITH
                                                }
                                                {
                                                };
                                            CAR;
                                            NIL operation;
                                            DUP 4;
                                            SIZE;
                                            DUP 3;
                                            DUP 5;
                                            ADD;
                                            COMPARE;
                                            LE;
                                            LOOP
                                                {
                                                    EMPTY_MAP
                                                        nat
                                                        (pair nat nat);
                                                    DIG 5;
                                                    DUP;
                                                    CAR;
                                                    GET 5;
                                                    SWAP;
                                                    DUP;
                                                    DUG 7;
                                                    GET 7;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 149;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    GET 3;
                                                    DIG 6;
                                                    DUP;
                                                    CAR;
                                                    GET 5;
                                                    SWAP;
                                                    DUP;
                                                    DUG 8;
                                                    GET 7;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 151;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    CAR;
                                                    DUP 6;
                                                    ADD;
                                                    DUP 6;
                                                    DUP;
                                                    DUP 3;
                                                    COMPARE;
                                                    GT;
                                                    LOOP
                                                        {
                                                            DUP 9;
                                                            GET 3;
                                                            CAR;
                                                            CAR;
                                                            DUP 4;
                                                            GET;
                                                            IF_NONE
                                                                {
                                                                    PUSH int 152;
                                                                    FAILWITH
                                                                }
                                                                {
                                                                };
                                                            CAR;
                                                            GET 4;
                                                            DUP 9;
                                                            DUP 3;
                                                            GET;
                                                            IF_NONE
                                                                {
                                                                    PUSH int 152;
                                                                    FAILWITH
                                                                }
                                                                {
                                                                };
                                                            EDIV;
                                                            IF_NONE
                                                                {
                                                                    PUSH int 152;
                                                                    FAILWITH
                                                                }
                                                                {
                                                                    CDR
                                                                };
                                                            PUSH nat 0;
                                                            PUSH bool False;
                                                            DUP 12;
                                                            GET 3;
                                                            CAR;
                                                            CAR;
                                                            DUP 7;
                                                            GET;
                                                            IF_NONE
                                                                {
                                                                    PUSH int 158;
                                                                    FAILWITH
                                                                }
                                                                {
                                                                };
                                                            CAR;
                                                            GET 3;
                                                            ITER
                                                                {
                                                                    DUP;
                                                                    GET 3;
                                                                    DUP 5;
                                                                    COMPARE;
                                                                    LT;
                                                                    IF
                                                                        {
                                                                            SWAP;
                                                                            DUP;
                                                                            DUG 2;
                                                                            NOT
                                                                        }
                                                                        {
                                                                            PUSH bool False
                                                                        };
                                                                    IF
                                                                        {
                                                                            SWAP;
                                                                            DROP;
                                                                            SWAP;
                                                                            DROP;
                                                                            SWAP;
                                                                            DROP;
                                                                            CAR;
                                                                            DUP 10;
                                                                            GET 3;
                                                                            CAR;
                                                                            CAR;
                                                                            DUP 5;
                                                                            GET;
                                                                            IF_NONE
                                                                                {
                                                                                    PUSH int 161;
                                                                                    FAILWITH
                                                                                }
                                                                                {
                                                                                };
                                                                            CAR;
                                                                            GET 4;
                                                                            SWAP;
                                                                            PUSH bool True
                                                                        }
                                                                        {
                                                                            GET 3;
                                                                            DIG 3;
                                                                            SUB;
                                                                            ABS;
                                                                            DUG 2
                                                                        }
                                                                };
                                                            DIG 2;
                                                            DROP;
                                                            IF
                                                                {
                                                                }
                                                                {
                                                                    PUSH string "WrongCondition: pickDone.value";
                                                                    FAILWITH
                                                                };
                                                            DUP 5;
                                                            SWAP;
                                                            DUP;
                                                            DUG 2;
                                                            MEM;
                                                            IF
                                                                {
                                                                    DIG 4;
                                                                    DUP;
                                                                    DUP 3;
                                                                    DUP;
                                                                    DUG 2;
                                                                    GET;
                                                                    IF_NONE
                                                                        {
                                                                            PUSH int 171;
                                                                            FAILWITH
                                                                        }
                                                                        {
                                                                        };
                                                                    DUP;
                                                                    CAR;
                                                                    PUSH nat 1;
                                                                    ADD;
                                                                    UPDATE 1;
                                                                    SOME;
                                                                    SWAP;
                                                                    UPDATE;
                                                                    DUP;
                                                                    DUP 3;
                                                                    DUP;
                                                                    DUG 2;
                                                                    GET;
                                                                    IF_NONE
                                                                        {
                                                                            PUSH int 172;
                                                                            FAILWITH
                                                                        }
                                                                        {
                                                                        };
                                                                    DUP;
                                                                    CDR;
                                                                    PUSH nat 1;
                                                                    ADD;
                                                                    UPDATE 2;
                                                                    SOME;
                                                                    SWAP;
                                                                    UPDATE;
                                                                    DUG 4
                                                                }
                                                                {
                                                                    DIG 4;
                                                                    PUSH
                                                                        (option
                                                                            (pair nat nat))
                                                                        (Some
                                                                            (Pair 1 1));
                                                                    DUP 3;
                                                                    UPDATE;
                                                                    DUG 4
                                                                };
                                                            DUP 10;
                                                            UNPAIR;
                                                            SWAP;
                                                            UNPAIR;
                                                            UNPAIR;
                                                            UNPAIR;
                                                            DUP;
                                                            DUP 10;
                                                            DUP;
                                                            DUG 2;
                                                            GET;
                                                            IF_NONE
                                                                {
                                                                    PUSH int 176;
                                                                    FAILWITH
                                                                }
                                                                {
                                                                };
                                                            UNPAIR;
                                                            UNPAIR;
                                                            SWAP;
                                                            UNPAIR;
                                                            DUP;
                                                            DUP 12;
                                                            DUP;
                                                            DUG 2;
                                                            GET;
                                                            IF_NONE
                                                                {
                                                                    PUSH int 176;
                                                                    FAILWITH
                                                                }
                                                                {
                                                                };
                                                            PUSH nat 1;
                                                            DIG 22;
                                                            GET 3;
                                                            CAR;
                                                            CAR;
                                                            DUP 18;
                                                            GET;
                                                            IF_NONE
                                                                {
                                                                    PUSH int 176;
                                                                    FAILWITH
                                                                }
                                                                {
                                                                };
                                                            CAR;
                                                            GET 3;
                                                            DIG 14;
                                                            GET;
                                                            IF_NONE
                                                                {
                                                                    PUSH int 176;
                                                                    FAILWITH
                                                                }
                                                                {
                                                                };
                                                            CAR;
                                                            SUB;
                                                            ABS;
                                                            UPDATE 1;
                                                            SOME;
                                                            SWAP;
                                                            UPDATE;
                                                            PAIR;
                                                            SWAP;
                                                            PAIR;
                                                            PAIR;
                                                            SOME;
                                                            SWAP;
                                                            UPDATE;
                                                            PAIR;
                                                            PAIR;
                                                            PAIR;
                                                            SWAP;
                                                            PAIR;
                                                            DUP;
                                                            DUG 9;
                                                            UNPAIR;
                                                            SWAP;
                                                            UNPAIR;
                                                            UNPAIR;
                                                            UNPAIR;
                                                            DUP;
                                                            DUP 9;
                                                            DUP;
                                                            DUG 2;
                                                            GET;
                                                            IF_NONE
                                                                {
                                                                    PUSH int 177;
                                                                    FAILWITH
                                                                }
                                                                {
                                                                };
                                                            UNPAIR;
                                                            UNPAIR;
                                                            SWAP;
                                                            CAR;
                                                            PUSH nat 1;
                                                            DIG 18;
                                                            GET 3;
                                                            CAR;
                                                            CAR;
                                                            DUP 14;
                                                            GET;
                                                            IF_NONE
                                                                {
                                                                    PUSH int 177;
                                                                    FAILWITH
                                                                }
                                                                {
                                                                };
                                                            CAR;
                                                            GET 4;
                                                            SUB;
                                                            ABS;
                                                            SWAP;
                                                            PAIR;
                                                            SWAP;
                                                            PAIR;
                                                            PAIR;
                                                            SOME;
                                                            SWAP;
                                                            UPDATE;
                                                            PAIR;
                                                            PAIR;
                                                            PAIR;
                                                            SWAP;
                                                            PAIR;
                                                            DUG 8;
                                                            PUSH nat 1;
                                                            ADD;
                                                            DUP;
                                                            DUP 3;
                                                            COMPARE;
                                                            GT
                                                        };
                                                    DROP 2;
                                                    DIG 2;
                                                    DUP 7;
                                                    GET 3;
                                                    GET 4;
                                                    CONTRACT unit;
                                                    IF_NONE
                                                        {
                                                            PUSH int 184;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    PUSH mutez 1;
                                                    PUSH nat 1000;
                                                    DIG 9;
                                                    DUP;
                                                    GET 3;
                                                    GET 3;
                                                    SWAP;
                                                    DUP;
                                                    CAR;
                                                    GET 5;
                                                    SWAP;
                                                    DUP;
                                                    DUG 12;
                                                    GET 7;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 180;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    CAR;
                                                    PUSH mutez 1;
                                                    DUP 13;
                                                    GET 3;
                                                    CAR;
                                                    CAR;
                                                    DUP 9;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 180;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    GET 8;
                                                    EDIV;
                                                    IF_NONE
                                                        {
                                                            PUSH int 180;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    CAR;
                                                    MUL;
                                                    MUL;
                                                    EDIV;
                                                    IF_NONE
                                                        {
                                                            PUSH int 181;
                                                            FAILWITH
                                                        }
                                                        {
                                                            CAR
                                                        };
                                                    MUL;
                                                    UNIT;
                                                    TRANSFER_TOKENS;
                                                    CONS;
                                                    DUP 7;
                                                    GET 3;
                                                    CAR;
                                                    CAR;
                                                    DUP 3;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 185;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    GET 3;
                                                    CDR;
                                                    CONTRACT unit;
                                                    IF_NONE
                                                        {
                                                            PUSH int 185;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    PUSH mutez 1;
                                                    PUSH nat 1000;
                                                    DIG 9;
                                                    DUP;
                                                    GET 3;
                                                    GET 3;
                                                    SWAP;
                                                    DUP;
                                                    CAR;
                                                    GET 5;
                                                    SWAP;
                                                    DUP;
                                                    DUG 12;
                                                    GET 7;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 180;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    CAR;
                                                    PUSH mutez 1;
                                                    DUP 13;
                                                    GET 3;
                                                    CAR;
                                                    CAR;
                                                    DUP 9;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 180;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    GET 8;
                                                    EDIV;
                                                    IF_NONE
                                                        {
                                                            PUSH int 180;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    CAR;
                                                    MUL;
                                                    MUL;
                                                    EDIV;
                                                    IF_NONE
                                                        {
                                                            PUSH int 181;
                                                            FAILWITH
                                                        }
                                                        {
                                                            CAR
                                                        };
                                                    DIG 9;
                                                    DUP;
                                                    CAR;
                                                    GET 5;
                                                    SWAP;
                                                    DUP;
                                                    DUG 11;
                                                    GET 7;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 180;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    CAR;
                                                    PUSH mutez 1;
                                                    DUP 12;
                                                    GET 3;
                                                    CAR;
                                                    CAR;
                                                    DUP 8;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 180;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    GET 8;
                                                    EDIV;
                                                    IF_NONE
                                                        {
                                                            PUSH int 180;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    CAR;
                                                    MUL;
                                                    SUB;
                                                    ABS;
                                                    MUL;
                                                    UNIT;
                                                    TRANSFER_TOKENS;
                                                    CONS;
                                                    DUP 7;
                                                    CAR;
                                                    CAR;
                                                    CAR;
                                                    CAR;
                                                    CONTRACT %assign_akaDAO
                                                        (pair
                                                            address
                                                            (pair address nat));
                                                    IF_NONE
                                                        {
                                                            PUSH int 188;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    PUSH mutez 0;
                                                    DIG 8;
                                                    DUP;
                                                    CAR;
                                                    GET 5;
                                                    SWAP;
                                                    DUP;
                                                    DUG 10;
                                                    GET 7;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 180;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    CAR;
                                                    PUSH mutez 1;
                                                    DUP 11;
                                                    GET 3;
                                                    CAR;
                                                    CAR;
                                                    DUP 7;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 180;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    GET 8;
                                                    EDIV;
                                                    IF_NONE
                                                        {
                                                            PUSH int 180;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    CAR;
                                                    MUL;
                                                    DUP 10;
                                                    GET 3;
                                                    CAR;
                                                    CAR;
                                                    DUP 6;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 189;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    GET 3;
                                                    CDR;
                                                    DIG 10;
                                                    DUP;
                                                    CAR;
                                                    GET 5;
                                                    SWAP;
                                                    DUP;
                                                    DUG 12;
                                                    GET 7;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 189;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    GET 4;
                                                    PAIR 3;
                                                    TRANSFER_TOKENS;
                                                    CONS;
                                                    DUG 2;
                                                    NIL
                                                        (pair
                                                            address
                                                            (pair nat nat));
                                                    DUP 3;
                                                    ITER
                                                        {
                                                            DUP;
                                                            GET 3;
                                                            PUSH nat 0;
                                                            COMPARE;
                                                            LT;
                                                            IF
                                                                {
                                                                    DUP;
                                                                    GET 3;
                                                                    SWAP;
                                                                    CAR;
                                                                    DIG 9;
                                                                    DUP;
                                                                    CAR;
                                                                    GET 5;
                                                                    SWAP;
                                                                    DUP;
                                                                    DUG 11;
                                                                    GET 7;
                                                                    GET;
                                                                    IF_NONE
                                                                        {
                                                                            PUSH int 196;
                                                                            FAILWITH
                                                                        }
                                                                        {
                                                                        };
                                                                    GET 4;
                                                                    PAIR 3;
                                                                    CONS
                                                                }
                                                                {
                                                                    DROP
                                                                }
                                                        };
                                                    DIG 3;
                                                    DUP 8;
                                                    CAR;
                                                    CAR;
                                                    GET 3;
                                                    CONTRACT %transfer
                                                        (list
                                                            (pair
                                                                address
                                                                (list
                                                                    (pair
                                                                        address
                                                                        (pair nat nat)))));
                                                    IF_NONE
                                                        {
                                                            PUSH int 292;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    PUSH mutez 0;
                                                    NIL
                                                        (pair
                                                            address
                                                            (list
                                                                (pair
                                                                    address
                                                                    (pair nat nat))));
                                                    DIG 4;
                                                    SELF_ADDRESS;
                                                    PAIR;
                                                    CONS;
                                                    TRANSFER_TOKENS;
                                                    CONS;
                                                    DUG 2;
                                                    PUSH nat 0;
                                                    DUP 8;
                                                    GET 3;
                                                    CAR;
                                                    CAR;
                                                    DUP 3;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 199;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    CAR;
                                                    GET 4;
                                                    COMPARE;
                                                    EQ;
                                                    IF
                                                        {
                                                            SWAP;
                                                            DROP;
                                                            DIG 2;
                                                            DROP;
                                                            SWAP;
                                                            DUP 5;
                                                            CAR;
                                                            CAR;
                                                            GET 3;
                                                            CONTRACT %transfer
                                                                (list
                                                                    (pair
                                                                        address
                                                                        (list
                                                                            (pair
                                                                                address
                                                                                (pair nat nat)))));
                                                            IF_NONE
                                                                {
                                                                    PUSH int 300;
                                                                    FAILWITH
                                                                }
                                                                {
                                                                };
                                                            PUSH mutez 0;
                                                            NIL
                                                                (pair
                                                                    address
                                                                    (list
                                                                        (pair
                                                                            address
                                                                            (pair nat nat))));
                                                            NIL
                                                                (pair
                                                                    address
                                                                    (pair nat nat));
                                                            PUSH nat 1;
                                                            DUP 10;
                                                            GET 3;
                                                            CAR;
                                                            CAR;
                                                            DIG 7;
                                                            GET;
                                                            IF_NONE
                                                                {
                                                                    PUSH int 200;
                                                                    FAILWITH
                                                                }
                                                                {
                                                                };
                                                            GET 5;
                                                            DIG 9;
                                                            DUP;
                                                            CAR;
                                                            GET 5;
                                                            SWAP;
                                                            DUP;
                                                            DUG 11;
                                                            GET 7;
                                                            GET;
                                                            IF_NONE
                                                                {
                                                                    PUSH int 200;
                                                                    FAILWITH
                                                                }
                                                                {
                                                                };
                                                            GET 4;
                                                            PAIR 3;
                                                            CONS;
                                                            SELF_ADDRESS;
                                                            PAIR;
                                                            CONS;
                                                            TRANSFER_TOKENS;
                                                            CONS
                                                        }
                                                        {
                                                            DROP 2;
                                                            SWAP;
                                                            DROP
                                                        };
                                                    DIG 3;
                                                    DUP;
                                                    CAR;
                                                    GET 5;
                                                    SWAP;
                                                    DUP;
                                                    DUG 5;
                                                    GET 7;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 204;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    CAR;
                                                    DIG 2;
                                                    ADD;
                                                    SWAP;
                                                    DIG 3;
                                                    DUP;
                                                    GET 7;
                                                    PUSH nat 1;
                                                    ADD;
                                                    UPDATE 7;
                                                    DUP;
                                                    GET 10;
                                                    SWAP;
                                                    DUP;
                                                    DUG 5;
                                                    GET 7;
                                                    COMPARE;
                                                    LT;
                                                    IF
                                                        {
                                                            DIG 3;
                                                            DUP;
                                                            CAR;
                                                            GET 5;
                                                            SWAP;
                                                            DUP;
                                                            DUG 5;
                                                            GET 7;
                                                            GET;
                                                            IF_NONE
                                                                {
                                                                    PUSH int 209;
                                                                    FAILWITH
                                                                }
                                                                {
                                                                };
                                                            CAR;
                                                            SWAP
                                                        }
                                                        {
                                                            PUSH nat 1;
                                                            DUP 4;
                                                            SIZE;
                                                            ADD;
                                                            SWAP
                                                        };
                                                    DUP 4;
                                                    SIZE;
                                                    DUP 3;
                                                    DUP 5;
                                                    ADD;
                                                    COMPARE;
                                                    LE
                                                };
                                            SWAP;
                                            DROP;
                                            SWAP;
                                            DROP;
                                            SWAP;
                                            DROP
                                        }
                                        {
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET 9;
                                            IF
                                                {
                                                    PUSH string "Paused now, cannot play gacha";
                                                    FAILWITH
                                                }
                                                {
                                                };
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET 3;
                                            CAR;
                                            CAR;
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            CDR;
                                            GET;
                                            IF_NONE
                                                {
                                                    PUSH int 110;
                                                    FAILWITH
                                                }
                                                {
                                                };
                                            GET 3;
                                            CDR;
                                            SENDER;
                                            COMPARE;
                                            NEQ;
                                            IF
                                                {
                                                }
                                                {
                                                    PUSH string "WrongCondition: sp.sender != self.data.gachas[params.gacha_id].issuer";
                                                    FAILWITH
                                                };
                                            DUP;
                                            CAR;
                                            PUSH nat 0;
                                            COMPARE;
                                            LT;
                                            IF
                                                {
                                                    SWAP;
                                                    DUP;
                                                    DUG 2;
                                                    CAR;
                                                    GET 3;
                                                    CDR;
                                                    SWAP;
                                                    DUP;
                                                    DUG 2;
                                                    CAR;
                                                    COMPARE;
                                                    LE
                                                }
                                                {
                                                    PUSH bool False
                                                };
                                            IF
                                                {
                                                    SWAP;
                                                    DUP;
                                                    DUG 2;
                                                    GET 3;
                                                    CAR;
                                                    CAR;
                                                    SWAP;
                                                    DUP;
                                                    DUG 2;
                                                    CDR;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 111;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    CAR;
                                                    CAR;
                                                    CDR;
                                                    SWAP;
                                                    DUP;
                                                    DUG 2;
                                                    CAR;
                                                    COMPARE;
                                                    LE
                                                }
                                                {
                                                    PUSH bool False
                                                };
                                            IF
                                                {
                                                }
                                                {
                                                    PUSH string "WrongCondition: ((params.gacha_amount > 0) & (params.gacha_amount <= self.data.gacha_limit)) & (params.gacha_amount <= self.data.gachas[params.gacha_id].gacha_amount)";
                                                    FAILWITH
                                                };
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET 3;
                                            CAR;
                                            CAR;
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            CDR;
                                            GET;
                                            IF_NONE
                                                {
                                                    PUSH int 113;
                                                    FAILWITH
                                                }
                                                {
                                                };
                                            GET 3;
                                            CAR;
                                            NOW;
                                            COMPARE;
                                            GE;
                                            IF
                                                {
                                                    SWAP;
                                                    DUP;
                                                    DUG 2;
                                                    GET 3;
                                                    CAR;
                                                    CAR;
                                                    SWAP;
                                                    DUP;
                                                    DUG 2;
                                                    CDR;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 113;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    CAR;
                                                    CAR;
                                                    CAR;
                                                    NOW;
                                                    COMPARE;
                                                    LT
                                                }
                                                {
                                                    PUSH bool False
                                                };
                                            IF
                                                {
                                                }
                                                {
                                                    PUSH string "WrongCondition: (sp.now >= self.data.gachas[params.gacha_id].issue_time) & (sp.now < self.data.gachas[params.gacha_id].cancel_time)";
                                                    FAILWITH
                                                };
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET 3;
                                            CAR;
                                            CAR;
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            CDR;
                                            GET;
                                            IF_NONE
                                                {
                                                    PUSH int 116;
                                                    FAILWITH
                                                }
                                                {
                                                };
                                            GET 8;
                                            AMOUNT;
                                            EDIV;
                                            IF_NONE
                                                {
                                                    PUSH int 116;
                                                    FAILWITH
                                                }
                                                {
                                                };
                                            CAR;
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            CAR;
                                            COMPARE;
                                            EQ;
                                            IF
                                                {
                                                    PUSH mutez 1;
                                                    DUP;
                                                    DUP 4;
                                                    GET 3;
                                                    CAR;
                                                    CAR;
                                                    DUP 4;
                                                    CDR;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 117;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    GET 8;
                                                    EDIV;
                                                    IF_NONE
                                                        {
                                                            PUSH int 117;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    CAR;
                                                    DUP 4;
                                                    GET 3;
                                                    CAR;
                                                    CAR;
                                                    DUP 4;
                                                    CDR;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 116;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    GET 8;
                                                    AMOUNT;
                                                    EDIV;
                                                    IF_NONE
                                                        {
                                                            PUSH int 116;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    CAR;
                                                    MUL;
                                                    MUL;
                                                    AMOUNT;
                                                    COMPARE;
                                                    EQ
                                                }
                                                {
                                                    PUSH bool False
                                                };
                                            IF
                                                {
                                                    PUSH mutez 0;
                                                    AMOUNT;
                                                    COMPARE;
                                                    GT
                                                }
                                                {
                                                    PUSH bool False
                                                };
                                            IF
                                                {
                                                }
                                                {
                                                    PUSH string "WrongCondition: ((params.gacha_amount == sp.fst(sp.ediv(sp.amount, self.data.gachas[params.gacha_id].xtz_per_gacha).open_some())) & (sp.amount == sp.mul(sp.fst(sp.ediv(sp.amount, self.data.gachas[params.gacha_id].xtz_per_gacha).open_some()) * sp.fst(sp.ediv(self.data.gachas[params.gacha_id].xtz_per_gacha, sp.mutez(1)).open_some()), sp.mutez(1)))) & (sp.amount > sp.tez(0))";
                                                    FAILWITH
                                                };
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            UNPAIR;
                                            UNPAIR;
                                            SWAP;
                                            UNPAIR;
                                            SWAP;
                                            UNPAIR;
                                            SENDER;
                                            DIG 6;
                                            DUP;
                                            CDR;
                                            SWAP;
                                            DUP;
                                            DUG 8;
                                            CAR;
                                            PAIR 3;
                                            SOME;
                                            DIG 7;
                                            GET 10;
                                            UPDATE;
                                            PAIR;
                                            SWAP;
                                            PAIR;
                                            SWAP;
                                            PAIR;
                                            PAIR;
                                            DUP;
                                            GET 10;
                                            PUSH nat 1;
                                            ADD;
                                            UPDATE 10;
                                            DUP;
                                            DUG 2;
                                            UNPAIR;
                                            SWAP;
                                            UNPAIR;
                                            UNPAIR;
                                            UNPAIR;
                                            DUP;
                                            DUP 7;
                                            CDR;
                                            DUP;
                                            DUG 2;
                                            GET;
                                            IF_NONE
                                                {
                                                    PUSH int 125;
                                                    FAILWITH
                                                }
                                                {
                                                };
                                            UNPAIR;
                                            UNPAIR;
                                            CAR;
                                            DUP 10;
                                            CAR;
                                            DIG 11;
                                            GET 3;
                                            CAR;
                                            CAR;
                                            DIG 11;
                                            CDR;
                                            GET;
                                            IF_NONE
                                                {
                                                    PUSH int 125;
                                                    FAILWITH
                                                }
                                                {
                                                };
                                            CAR;
                                            CAR;
                                            CDR;
                                            SUB;
                                            ABS;
                                            SWAP;
                                            PAIR;
                                            PAIR;
                                            PAIR;
                                            SOME;
                                            SWAP;
                                            UPDATE;
                                            PAIR;
                                            PAIR;
                                            PAIR;
                                            SWAP;
                                            PAIR;
                                            NIL operation
                                        }
                                }
                        }
                        {
                            IF_LEFT
                                {
                                    IF_LEFT
                                        {
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET 5;
                                            CDR;
                                            SENDER;
                                            COMPARE;
                                            EQ;
                                            IF
                                                {
                                                    PUSH bool True
                                                }
                                                {
                                                    SWAP;
                                                    DUP;
                                                    DUG 2;
                                                    GET 3;
                                                    GET 4;
                                                    SENDER;
                                                    COMPARE;
                                                    EQ
                                                };
                                            IF
                                                {
                                                }
                                                {
                                                    PUSH string "Only oracle or manager can make the refund";
                                                    FAILWITH
                                                };
                                            NIL operation;
                                            DIG 2;
                                            DUP;
                                            GET 10;
                                            SWAP;
                                            DUP;
                                            DUG 4;
                                            GET 7;
                                            DUP;
                                            DUP 3;
                                            COMPARE;
                                            GT;
                                            LOOP
                                                {
                                                    DUP 5;
                                                    UNPAIR;
                                                    SWAP;
                                                    UNPAIR;
                                                    UNPAIR;
                                                    UNPAIR;
                                                    DUP;
                                                    DUP 11;
                                                    CAR;
                                                    GET 5;
                                                    DUP 8;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 244;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    GET 3;
                                                    DUP;
                                                    DUG 2;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 244;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    UNPAIR;
                                                    UNPAIR;
                                                    UNPAIR;
                                                    SWAP;
                                                    DIG 14;
                                                    CAR;
                                                    GET 5;
                                                    DUP 12;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 244;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    CAR;
                                                    ADD;
                                                    SWAP;
                                                    PAIR;
                                                    PAIR;
                                                    PAIR;
                                                    SOME;
                                                    SWAP;
                                                    UPDATE;
                                                    PAIR;
                                                    PAIR;
                                                    PAIR;
                                                    SWAP;
                                                    PAIR;
                                                    DUG 4;
                                                    DIG 2;
                                                    DUP 5;
                                                    CAR;
                                                    GET 5;
                                                    DUP 3;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 247;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    GET 4;
                                                    CONTRACT unit;
                                                    IF_NONE
                                                        {
                                                            PUSH int 247;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    PUSH mutez 1;
                                                    DUP 7;
                                                    CAR;
                                                    GET 5;
                                                    DUP 5;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 246;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    CAR;
                                                    PUSH mutez 1;
                                                    DIG 8;
                                                    DUP;
                                                    GET 3;
                                                    CAR;
                                                    CAR;
                                                    SWAP;
                                                    DUP;
                                                    DUG 10;
                                                    CAR;
                                                    GET 5;
                                                    DUP 8;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 246;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    GET 3;
                                                    GET;
                                                    IF_NONE
                                                        {
                                                            PUSH int 246;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    GET 8;
                                                    EDIV;
                                                    IF_NONE
                                                        {
                                                            PUSH int 246;
                                                            FAILWITH
                                                        }
                                                        {
                                                        };
                                                    CAR;
                                                    MUL;
                                                    MUL;
                                                    UNIT;
                                                    TRANSFER_TOKENS;
                                                    CONS;
                                                    DUG 2;
                                                    PUSH nat 1;
                                                    ADD;
                                                    DUP;
                                                    DUP 3;
                                                    COMPARE;
                                                    GT
                                                };
                                            DROP 2;
                                            SWAP;
                                            DROP;
                                            SWAP;
                                            DUP;
                                            GET 10;
                                            UPDATE 7;
                                            SWAP
                                        }
                                        {
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET 3;
                                            GET 4;
                                            SENDER;
                                            COMPARE;
                                            EQ;
                                            IF
                                                {
                                                }
                                                {
                                                    PUSH string "WrongCondition: sp.sender == self.data.manager";
                                                    FAILWITH
                                                };
                                            SWAP;
                                            UNPAIR;
                                            UNPAIR;
                                            SWAP;
                                            UNPAIR;
                                            CAR;
                                            DIG 4;
                                            SWAP;
                                            PAIR;
                                            PAIR;
                                            SWAP;
                                            PAIR;
                                            PAIR;
                                            NIL operation
                                        }
                                }
                                {
                                    IF_LEFT
                                        {
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET 3;
                                            GET 4;
                                            SENDER;
                                            COMPARE;
                                            EQ;
                                            IF
                                                {
                                                }
                                                {
                                                    PUSH string "WrongCondition: sp.sender == self.data.manager";
                                                    FAILWITH
                                                };
                                            UPDATE 9
                                        }
                                        {
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET 3;
                                            GET 4;
                                            SENDER;
                                            COMPARE;
                                            EQ;
                                            IF
                                                {
                                                    DUP;
                                                    PUSH int 0;
                                                    COMPARE;
                                                    LT
                                                }
                                                {
                                                    PUSH bool False
                                                };
                                            IF
                                                {
                                                    DUP;
                                                    PUSH int 3;
                                                    SWAP;
                                                    COMPARE;
                                                    LE
                                                }
                                                {
                                                    PUSH bool False
                                                };
                                            IF
                                                {
                                                }
                                                {
                                                    PUSH string "WrongCondition: ((sp.sender == self.data.manager) & (params > 0)) & (params <= 3)";
                                                    FAILWITH
                                                };
                                            SWAP;
                                            UNPAIR;
                                            UNPAIR;
                                            SWAP;
                                            UNPAIR;
                                            SWAP;
                                            UNPAIR;
                                            SWAP;
                                            CDR;
                                            DIG 5;
                                            PAIR;
                                            SWAP;
                                            PAIR;
                                            SWAP;
                                            PAIR;
                                            SWAP;
                                            PAIR;
                                            PAIR
                                        };
                                    NIL operation
                                }
                        }
                }
                {
                    IF_LEFT
                        {
                            IF_LEFT
                                {
                                    IF_LEFT
                                        {
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET 3;
                                            GET 4;
                                            SENDER;
                                            COMPARE;
                                            EQ;
                                            IF
                                                {
                                                }
                                                {
                                                    PUSH string "WrongCondition: sp.sender == self.data.manager";
                                                    FAILWITH
                                                };
                                            SWAP;
                                            UNPAIR;
                                            SWAP;
                                            UNPAIR;
                                            UNPAIR;
                                            CAR;
                                            DIG 4;
                                            SWAP;
                                            PAIR;
                                            PAIR;
                                            PAIR;
                                            SWAP;
                                            PAIR
                                        }
                                        {
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET 3;
                                            GET 4;
                                            SENDER;
                                            COMPARE;
                                            EQ;
                                            IF
                                                {
                                                }
                                                {
                                                    PUSH string "WrongCondition: sp.sender == self.data.manager";
                                                    FAILWITH
                                                };
                                            SWAP;
                                            UNPAIR;
                                            SWAP;
                                            UNPAIR;
                                            SWAP;
                                            UNPAIR;
                                            UNPAIR;
                                            DUP 6;
                                            CDR;
                                            SOME;
                                            DIG 6;
                                            CAR;
                                            UPDATE;
                                            PAIR;
                                            PAIR;
                                            SWAP;
                                            PAIR;
                                            SWAP;
                                            PAIR
                                        }
                                }
                                {
                                    IF_LEFT
                                        {
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET 3;
                                            GET 4;
                                            SENDER;
                                            COMPARE;
                                            EQ;
                                            IF
                                                {
                                                }
                                                {
                                                    PUSH string "WrongCondition: sp.sender == self.data.manager";
                                                    FAILWITH
                                                };
                                            SWAP;
                                            UNPAIR;
                                            UNPAIR;
                                            UNPAIR;
                                            SWAP;
                                            CAR;
                                            DIG 4;
                                            SWAP;
                                            PAIR;
                                            SWAP;
                                            PAIR;
                                            PAIR;
                                            PAIR
                                        }
                                        {
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET 3;
                                            GET 4;
                                            SENDER;
                                            COMPARE;
                                            EQ;
                                            IF
                                                {
                                                }
                                                {
                                                    PUSH string "WrongCondition: sp.sender == self.data.manager";
                                                    FAILWITH
                                                };
                                            SWAP;
                                            UNPAIR;
                                            SWAP;
                                            UNPAIR;
                                            UNPAIR;
                                            SWAP;
                                            CDR;
                                            DIG 4;
                                            PAIR;
                                            SWAP;
                                            PAIR;
                                            PAIR;
                                            SWAP;
                                            PAIR
                                        }
                                };
                            NIL operation
                        }
                        {
                            IF_LEFT
                                {
                                    IF_LEFT
                                        {
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET 3;
                                            GET 4;
                                            SENDER;
                                            COMPARE;
                                            EQ;
                                            IF
                                                {
                                                }
                                                {
                                                    PUSH string "WrongCondition: sp.sender == self.data.manager";
                                                    FAILWITH
                                                };
                                            SWAP;
                                            UNPAIR;
                                            SWAP;
                                            UNPAIR;
                                            UNPAIR;
                                            SWAP;
                                            CAR;
                                            DIG 4;
                                            SWAP;
                                            PAIR;
                                            SWAP;
                                            PAIR;
                                            PAIR;
                                            SWAP;
                                            PAIR
                                        }
                                        {
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET 3;
                                            GET 4;
                                            SENDER;
                                            COMPARE;
                                            EQ;
                                            IF
                                                {
                                                    PUSH bool True
                                                }
                                                {
                                                    SWAP;
                                                    DUP;
                                                    DUG 2;
                                                    GET 5;
                                                    CDR;
                                                    SENDER;
                                                    COMPARE;
                                                    EQ
                                                };
                                            IF
                                                {
                                                }
                                                {
                                                    PUSH string "WrongCondition: (sp.sender == self.data.manager) | (sp.sender == self.data.oracle)";
                                                    FAILWITH
                                                };
                                            SWAP;
                                            UNPAIR;
                                            SWAP;
                                            UNPAIR;
                                            SWAP;
                                            UNPAIR;
                                            CAR;
                                            DIG 4;
                                            SWAP;
                                            PAIR;
                                            PAIR;
                                            SWAP;
                                            PAIR;
                                            SWAP;
                                            PAIR
                                        };
                                    NIL operation
                                }
                                {
                                    IF_LEFT
                                        {
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET 3;
                                            GET 4;
                                            SENDER;
                                            COMPARE;
                                            EQ;
                                            IF
                                                {
                                                }
                                                {
                                                    PUSH string "WrongCondition: sp.sender == self.data.manager";
                                                    FAILWITH
                                                };
                                            DUP;
                                            ITER
                                                {
                                                    IF_LEFT
                                                        {
                                                            DIG 2;
                                                            UNPAIR;
                                                            UNPAIR;
                                                            SWAP;
                                                            UNPAIR;
                                                            SWAP;
                                                            UNPAIR;
                                                            SWAP;
                                                            UNPAIR;
                                                            SWAP;
                                                            PUSH
                                                                (option unit)
                                                                (Some Unit);
                                                            DIG 7;
                                                            UPDATE;
                                                            SWAP;
                                                            PAIR;
                                                            SWAP;
                                                            PAIR;
                                                            SWAP;
                                                            PAIR;
                                                            SWAP;
                                                            PAIR;
                                                            PAIR;
                                                            SWAP
                                                        }
                                                        {
                                                            DIG 2;
                                                            UNPAIR;
                                                            UNPAIR;
                                                            SWAP;
                                                            UNPAIR;
                                                            SWAP;
                                                            UNPAIR;
                                                            SWAP;
                                                            UNPAIR;
                                                            SWAP;
                                                            NONE unit;
                                                            DIG 7;
                                                            UPDATE;
                                                            SWAP;
                                                            PAIR;
                                                            SWAP;
                                                            PAIR;
                                                            SWAP;
                                                            PAIR;
                                                            SWAP;
                                                            PAIR;
                                                            PAIR;
                                                            SWAP
                                                        }
                                                };
                                            DROP;
                                            NIL operation
                                        }
                                        {
                                            SWAP;
                                            DUP;
                                            DUG 2;
                                            GET 5;
                                            CDR;
                                            SENDER;
                                            COMPARE;
                                            EQ;
                                            IF
                                                {
                                                    PUSH bool True
                                                }
                                                {
                                                    SWAP;
                                                    DUP;
                                                    DUG 2;
                                                    GET 3;
                                                    GET 4;
                                                    SENDER;
                                                    COMPARE;
                                                    EQ
                                                };
                                            IF
                                                {
                                                }
                                                {
                                                    PUSH string "Only oracle or manager can make the withdraw";
                                                    FAILWITH
                                                };
                                            NIL operation;
                                            SENDER;
                                            CONTRACT unit;
                                            IF_NONE
                                                {
                                                    PUSH int 256;
                                                    FAILWITH
                                                }
                                                {
                                                };
                                            DIG 2;
                                            UNIT;
                                            TRANSFER_TOKENS;
                                            CONS
                                        }
                                }
                        }
                };
            NIL operation;
            SWAP;
            ITER
                {
                    CONS
                };
            PAIR
        }
}